<document>
	<date>2014-04-17</date>
        <title>
Utiliser la box Homewizard comme passerelle Somfy</title>
        <author>Cdric Locqueneux</author>
        <tags_set>
                <tag>Homewizard</tag>
                <tag>Somfy</tag>
        </tags_set>
        <categories_set>
                <category>Guides Automatismes</category>
        </categories_set>
        <text>Je vous ai presente en debut de semaine  la box Homewizard , une petite box tres interessante pour ses possibilites et son tarif. Cette box est en effet capable de piloter de nombreux equipement differents, dont les automatismes Somfy en RTS. Cerise sur le gateau, elle est totalement autonome. Bien que pas vraiment officielle, cette box domotique dispose dune API permettant de la piloter via des requetes HTTP. Il na pas fallu longtemps pour que certains sen servent comme simple passerelle sur leur box, pour piloter des equipements incompatibles avec leur box domotique. Ainsi, sur le forum officiel Fibaro, nous pouvons deja voir des personnes piloter leurs volets Somfy avec leur box Z-Wave HC2.  Je vous propose de voir ici plus en detail comment mettre cela en place. Sommaire I. Pre requis II. Format des requetes III. Mise en application 3.1 Utilisation avec la box Fibaro HC2 3.2 Utilisation avec la box eedomus IV. Conclusion Commentaires (13) Powered by SEO TOC 1.7.3  
 I. Pre requis  Tout dabord, il faut connaitre ladresse IP de votre box. Vous pouvez la voir dans les parametres de votre application HomeWizard:   Ou en page daccueil de votre interface HomeWizard Online:   Les habitues pourront egalement la voir directement sur leur routeur ADSL ;-) Nous avons ensuite besoin de connaitre les identifiants des peripheriques presents sur la box, les ID (tous les peripheriques, scenes, etc sont identifies ainsi). Pour cela, tapez ladresse suivante dans votre navigateur Web pour acceder en local a votre box: http:// AdresseIPHomeWizard / MotdepasseHomeWizard /get-sensors/ En remplacant bien sur  AdresseIPHomeWizard par ladresse IP de votre HomeWizard et  MotdepasseHomeWizard par le mot de passe de votre HomeWizard. Vous obtiendrez une reponse au format JSON: {status: ok, version: 2.56, request: {route: /get-sensors }, response: {switches : [{id: 0 ,name: Prise DIO ,type:switch,status:off,favorite:no},{id: 1 ,name: Lampe Bureau ,type:dimmer,status:on,dimlevel:49,favorite:no},{id: 2 ,name: Ch. Filles ,type:hue,status:off,hue_id:0,light_id: 4 ,color:{hue:0,sat:0,bri:0},favorite:no},{id: 3 ,name: Chambre Lucas ,type:hue,status:off,hue_id:0,light_id:2,color:{hue:0,sat:0,bri:0},favorite:no}], uvmeters: [], windmeters: [], rainmeters: [], thermometers: [{id:0,name:Bureau,te:20.6,hu:46,favorite:no,channel:1,te+:21.3,te+t:00:00,hu+:47,hu+t:20:59,te-:18.9,te-t:10:29,hu-:43,hu-t:05:46,outside:yes}], energymeters: [], energylinks: [], heatlinks: [], hues: [{id:0,name:Hue Bridge,username:dZr2Vt9d,ip:192.168.x.xx}], scenes: [{id: 0, name: Test, favorite: no},{id: 1, name: Dodo, favorite: no, camera: {id: 0, preset: -1}}], somfy: [], kakusensors: [], cameras: [{id: 0, name: Entree, username: admin, password: xxxxx, ip: 192.168.x.xx, port: 80, presets:[]},{id: 1, name: Chambre Lucas, username: admin, password: xxxx, ip: 192.168.x.xx, port: 80, presets:[]}]}}  Chaque element a son propre ID, comme ceux mis en rouge ici. Ma prise DIO a lid 0, ma lampe bureau lid 1, etc     1   2 Homewizard   Somfy 
        </text>
</document>
