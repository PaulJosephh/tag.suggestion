<document>
	<date>2012-05-03</date>
        <title>
Sondes de tempratures weatherproof</title>
        <author>Vincent PREMEL</author>
        <tags_set>
                <tag>1-wire</tag>
                <tag>Arduino</tag>
                <tag>sondes</tag>
        </tags_set>
        <categories_set>
                <category>Guides Chauffage</category>
        </categories_set>
        <text>En domotique, il est dusage de disposer des sondes de temperatures un peu partout pour dune part connaitre la temperature (si, si), mais surtout reguler son chauffage ou dans mon cas, mon systeme de ventilation double flux. Toutefois, dans une maison moyenne le nombre de capteurs peut vite exploser et le budget avec. Dou lidee de fabriquer ses capteurs a partir de composants electroniques disponibles rapidement, et dun peu dhuile de coude.  
 I. Le Dallas/MAXIM DS18B20  Ce composant electronique est un thermometre/thermostat numerique, fonctionnant sur le bus 1-Wire de Dallas (rachete maintenant par MAXIM). Ses caracteristiques techniques sont tout a fait en rapport avec nos usages. Extrait du datasheet :  FEATURES 
* Unique 1-Wire Interface Requires Only One Port Pin for Communication 
* Each Device has a Unique 64-Bit Serial Code Stored in an On-Board ROM 
* Multidrop Capability Simplifies Distributed Temperature-Sensing Applications 
* Requires No External Components 
* Can Be Powered from Data Line; Power Supply Range is 3.0V to 5.5V 
* Measures Temperatures from -55C to +125C (-67F to +257F) 
* 0.5C Accuracy from -10C to +85C 
* Thermometer Resolution is User Selectable from 9 to 12 Bits 
* Converts Temperature to 12-Bit Digital Word in 750ms (Max)  Cest donc un composant qui dispose dune large gamme de temperatures mesurables, avec une bonne precision de -10C a 85C. De plus, ce composant se suffit a lui meme, et peut etre alimente en par la ligne de donnees (parasite power), lui permettant de nutiliser que 2 fils (il y a un cote un peu mensonger dans la denomination 1-Wire, non ?). De plus, il dispose dun numero de serie unique a 64 bits permettant lidentification precise et la mise en bus (ce numero de serie est souvent utilise dans les serrures electroniques, par exemple sur les machines a cafe en entreprise qui utilisent un systeme de credit). Ce composant existe en plusieurs boitiers, le plus courant est le TO92, que jai utilise :  Le DS18B20 en boitier TO92.  Par ailleurs, ce capteur est un capteur numerique, pre-etalonne. Contrairement aux capteurs analogiques comme le LM35 par exemple, la longueur du cable ninflue pas sur la mesure, et il ny a pas detalonnage a realiser, ce qui simplifie grandement la mise en oeuvre. Maintenant ce petit composant va devoir subir les outrages du temps, pendant de longues annees. Il faut donc le preparer a resister a lhumidite et aux changements de temperature.  
 II. Le contenant  Il va falloir trouver un boitier qui soit tout a la fois petit, peu onereux, bon conducteur de chaleur, tout en etant leger (peu massif) pour eviter des inerties trop importante dans les mesures. Les metaux sont tout indiques. Jai donc utilise du tube aluminium de diametre 8 mm. On commence dabord par decouper des morceaux de 5 cm environ, quon prendra soin debavurer avec un peu de toile emeri ou une petite lime :  Decoupe de morceaux dans un tube aluminium.  Decoupez autant de morceaux que vous avez de capteurs a fabriquer. Cinq dans mon cas.   
 III. Soudure  Il faut maintenant souder un morceau de cable suffisamment long au composant pour convenir a votre usage. Dans mon cas, 1 m suffira. Bien que le DS18B20 puisse fonctionner avec seulement 2 fils (mode parasite power), je prefere en souder 3 afin de me laisser le choix une fois le capteur fini. Nimporte quel cable fera laffaire, mais il vaut mieux : quil rentre non denude dans le tube aluminium, quil dispose au moins de 3 conducteurs, quil soit compose de fil souple et non pas de fil rigide (pour eviter les cassures qui rendraient le capteur inoperant, et de ce fait bon pour la poubelle). Les soudures realisees. Le cable utilise est une chute de cable DMX.   
 IV. Isolation  Afin deviter les court-circuits avec laluminium du tube, il convient disoler correctement les soudures. Pour ca, le ruban adhesif delectricien suffira, meme si les puristes prefereront de la gaine thermo-retractable. Commencez par isoler la patte centrale puis les pattes exterieures.  L'isolation des soudures en ruban adhesif.  Puis on enfile le tube alu sur le composant :  Le tube aluminium enfile sur le DS18B20  A ce moment la, avant que tout ne deviennent indemontable, il est bon de tester le bon fonctionnement du capteur de temperature. Ici, je teste avec une Arduino UNO :  Banc de test : Arduino Uno avec shield Ethernet, plus programme de mon cru.  Profitez-en pour noter le numero de serie unique du composant, qui sera bien pratique pour les differencier une fois quil seront tous installes sur un meme bus Ce numero mest donne par le programme de lArduino (il nest pas marque sur le boitier du composant, ca serait trop petit). Bien entendu, il ne faut brancher quun capteur a la fois  Numero de serie 64 bits, donne par le programme de l'Arduino.  
 V. Collage  Il va falloir maintenant rendre le tout etanche. Pour cela, je vais noyer le composant dans de la resine Epoxy. La resine Epoxy est une colle bi-composant (un adhesif et un durcisseur), vendu sous differentes marques en grande surface. Cest une colle epaisse, qui se prete assez mal au coulage dans de petits espaces. Jutilise la colle Epoxy suite a mon experience de modeliste, mais aussi parce quun collegue qui avait realise des sondes similaires mais avec du silicone, men a confirme la mauvaise tenue dans le temps. Dans notre cas, la colle doit entierement remplir le tube aluminium, sous peine quil reste des bulles dair coincees qui seront nefastes a la mesure. Il y a donc une astuce, il faut diluer la colle. Oui, mais avec quoi ? Avec de lalcool, tout simplement.  La colle Epoxy bi-composant.  Dabord, melanger la colle a part egale dans un petit recipient (ici, une boite de nourriture pour chat  aucun animal na ete maltraite pour realiser ce tutorial). Melanger a laide dun petit objet que vous pourrez sacrifier (chute de cable electrique, petit bout de bois) :  La colle melangee.  Ensuite, ajoutez lalcool. Jai utilise de lalcool menager qui est parfume, mais ce nest pas necessaire. Rajouter de lalcool jusqua ce que la colle coule facilement au bout du fil electrique, sans etre liquide. Jestime quil faut un quart du volume en alcool. (Astuce : la colle epoxy degage une odeur a meme dincommoder votre conjoint(e). Proposez lui pour faire passer la pilule de recoller dans la foulee tel ou tel objet qui traine, casse au fond dun tiroir). Je vous conseille dutiliser des gants, car la colle Epoxy peut-etre irritante pour la peau.  Alcool menager  Il faut ensuite faire couler la colle dans le tube, en travaillant un peu avec le fil electrique (ou un fil plus fin), pour quelle descende bien. Si le melange est suffisamment liquide, vous verrez les bulles remonter. Jai essaye au depart avec une seringue et un petit tuyau, mais le resultat netait pas probant. Une fois rempli, le tube ressemble a ca :  La colle est coulee, plus qu'a faire secher !  Faites ensuite secher vos capteurs, a la verticale, le temps necessaire a la prise de la colle. La reaction de prise est exothermique, vous pouvez donc considerer que la colle est seche lorsque le capteur est redevenu froid. Par securite, attendre 24 heures avant de les monter definitivement.  Les capteurs en train de secher, a la verticale.  
 VI. Conclusion  Voila, maintenant vous savez tout pour realiser des sondes de temperature a quelques euros la piece. De quoi en mettre partout ! Suivra la presentation du programme de lArduino utilise ici. Le but de tout ca, cest la surveillance et le pilotage de ma VMC double flux On trouve par exemple des DS18B20 chez  planete-domotique  pour un prix modique.   1-wire   Arduino   sondes 
        </text>
</document>
