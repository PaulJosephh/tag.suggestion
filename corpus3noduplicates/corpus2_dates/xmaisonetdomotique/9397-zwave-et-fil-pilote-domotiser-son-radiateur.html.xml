<document>
	<date>2012-02-14</date>
        <title>
Zwave et fil pilote: domotiser son radiateur</title>
        <author>Cdric Locqueneux</author>
        <tags_set>
                <tag>chauffage</tag>
                <tag>eedomus</tag>
        </tags_set>
        <categories_set>
                <category>Guides Chauffage</category>
        </categories_set>
        <text>Comme vous le savez,  je me chauffe au bois , je ne suis donc pas tres concerne par les problematiques de gestion de chauffage electrique. Cest pourtant une question que vous etes nombreux a vous poser, dans les commentaires, sur le forum, par mail Et ce nest pas une question bete, puisque meme les plus grandes marques ont parfois du mal a gerer ce fameux fil pilote, bien specifique a la France. Du coup, comme je devais changer le radiateur de la salle de bain par un beau seche serviettes, jai decide den profiter pour faire quelques essais. Nous allons donc voir aujourdhui comment gerer le fil pilote dun radiateur electrique.   
 I. Principe  La plupart des radiateurs electriques modernes peuvent etre pilotes grace a un fil pilote. Mon radiateur seche serviette dentree de gamme achete en grande surface de bricolage pourune centaine deurosen est dote. Ce terme fil pilote designe en fait un systeme de commandes base sur le signal electrique alternatif 230 Vac. Les principaux ordres, au nombre de 4, sont Confort, Eco, Arret et Hors Gel. Les deux autres ordres (radiateurs 6 ordres) sont geres grace a differents timing sur les modifications dalternance, et permettent de passer dans des modes Eco avances (-1C, -2C )   Il faut noter que lutilisation simple du fil pilote suppose lutilisation du thermostat interne du radiateur et cest le radiateur qui gere la temperature en fonction du mode envoye par le fil pilote. Dans le cas dune commande externe, nous reglons le thermostat du radiateur au maximum afin de le desactiver, puisque cest le controleur externe qui se chargera dactiver ou non le radiateur. Revenons sur les 4 principaux ordres des fils pilotes : Aucune tension sur le fil pilote, le radiateur est en mode confort (cest le cas si vous ne connectez pas le fil pilote par exemple) Tension de 230V appliquee en permanence, le radiateur est en mode Eco Tension de 230V appliquee en permanence avec lalternance negative filtre, le radiateur est a larret Tension de 230V appliquee en permanence avec lalternance positive filtre, le radiateur est en hors gel Pour reussir a creer ces ordres, il faudra utiliser  unediode de redressement 1N4007  et un module On / Off. Avec un simple module On / Off, on pourra deja gerer le mode Confort et Arret, ce qui nest deja pas si mal. Mais quitte a domotiser son chauffage et remplacer le controleur livre avec la maison, qui sait tout de meme faire mieux que du On / Off, nous allons utiliser  un micro module Fibaro FGS221  disposant de deux contacts ( que nous avions teste ici ). Couple a deux diodes de redressement, nous pourrons piloter les 4 ordres principaux:Confort, Eco, Arret et Hors Gel. On trouve tout le necessaire chez notre partenaire  Planete Domotique , qui a la bonne idee de vendre meme  les diodes pre cablees  (super quand on ne sait pas jouer du fer a souder comme moi :p):  Le module Fibaro, deux diodes de redressement, et des connecteurs Wago pour faciliter les branchements  Passons maintenant au montage !  
 II. Mise en place  
[box_light]Avant de commencer, pensez a couper le courant, on travaille tout de meme avec du 220V ![/box_light]  Voila mon petit radiateur seche serviettes de 750w. Meme si on se chauffe au bois, la salle de bain parait toujours un peu fraiche quand on sort de la douche, on aime donc bien avoir chaud, et si les serviettes sont chaudes aussi, cest le paradis :D   Je nentrerai pas dans le detail de la pose du radiateur: trois fixations a visser dans le mur, et on nen parle plus. Il faut juste prevoir des fixations solides en fonctions du mur, car ce type de radiateur, qui contient du liquide, est plus lourd quil ny parait ! Une fois pose, attaquons nous au raccordement electrique. Dans ma boite dencastrement jai 4 fils: la phase (marron), le neutre (bleu), la terre (jaune et vert), et le pilote qui va jusqua mon boitier de controle Delta Dore (orange). Sur ce radiateur, il ny a pas de terre a brancher, quant au fil pilote de mon controleur Delta Dore, nous ne lutiliserons pas, puisque nous utiliserons notre module Zwave. Jai donc cache ces deux fils, il y en aura suffisamment comme ca dans la boite   Il faut donc maintenant raccorder le module et le radiateur a lalimentation electrique, puis le fil pilote aux diodes et au module.   Vu comme ca, ce nest pas tres clair, voici donc un schema:   Si on utilise les  diodes pre cablees vendues chez Planete Domotique , la premiere sera donc branchee cote blanc sur le module (O1) et cote rouge sur le fil pilote. La seconde diode sera branchee en sens contraire, partie rouge sur le module (O2) et partie blanche sur le fil pilote.   En suivant le schema le branchement est relativement facile. Le plus dur est sans doute de caser tous les fils dans la boite dencastrement. Mais le module Fibaro est vraiment petit, si vous vous arrangez pour ne pas avoir des fils trop longs, tout rentrera. Ici jutilise une boite de 40mm de profondeur, et tout y est:   Essayez autant que possible de degager la petit antenne noire du module pour quil capte correctement les ordres du reseau Zwave. Voila le radiateur installe, avec son module Zwave integre, ni vu ni connu:   Il ny a plus qua piloter tout ca depuis son interface preferee. Note: jutilise ici le module Fibaro 2 x 1500w sur un radiateur de 750w. Mais caurait pu etre un radiateur de 1500 ou 2000w sans probleme. En effet, cette puissance est utilisee sur lalimentation du radiateur, et non sur le fil pilote, qui ne consomme rien. Il ny a donc aucune inquietude a avoir sur la puissance du radiateur.  
 III. Pilotage depuis leedomus  Ayant migre toute la maison sur  la nouvelle box eedomus , jai donc ajoute ce radiateur a la box. Cela tombe bien, la derniere mise a jour a ajoute le support des modules Fibaro :D On commence donc par inclure le module a la box (en fait, si vous pouvez le faire avant de le monter sur le radiateur, cest plus simple ;-) Une fois ajoute a la box, nous obtenons deux controleurs On / Off:   Si vous avez suivi, on controle ici les deux relais du Fibaro, et cest  une combinaison des deux  qui va constituer un ordre pour le fil pilote. Si les deux relais sont sur Off, le radiateur est en mode Confort. Si les deux relais sont sur On, le radiateur passe en mode Eco. Si le relai 1 est sur On et le 2 sur Off, le radiateur est en mode Arret. Si le relai 1 est sur Off et le 2 sur On, le radiateur est en mode Hors Gel. Vous comprendrez que ce nest pas tres simple a gerer :/ Du coup, comme l eedomus  le permet, nous allons creer un module virtuel pour gerer les 4 ordres du radiateur de facon beaucoup plus claire. On ajoute donc un module Etat:   Et on le configure:   Le plus important est longlet valeur, ou on va definir les differentes valeurs que peut prendre ce module. On peut personnaliser les icones et les titres comme on le souhaite:   Il ny a plus qua creer 4 regles correspondant aux 4 ordres, qui se chargeront dactiver les relais du Fibaro comme il faut:  Regle pour le mode Confort  Regle pour le mode Eco  Regle pour le mode Arret  Regle pour le mode Hors Gel  Ca peut paraitre un peu lourd a realiser, mais cest tres rapide grace a la fonction de duplication de regle ;-) Vous changez letat du critere, et letat des relais a activer et cest fini. Une fois termine, lutilisation du radiateur est beaucoup plus facile: sur le module virtuel, qui represente donc notre radiateur, on selectionne letat quon souhaite lui donner. Cela va declencher la regle adequate et positionner les relais du module Fibaro sur la bonne combinaison, sans avoir a se preoccuper de savoir a quoi elle correspond.   Bien sur, ce radiateur virtuel peut etre utilise dans les scenarios: chez moi je lai inclu dans le scenario reveil matin pour quil fasse bon et que les serviettes soient chaudes quand je vais prendre ma douche, les jours ou je travaille:   Si tous les radiateurs etaient relies de la sorte, on pourrait passer automatiquement les radiateurs en mode eco quand on active lalarme, les rallumer a distance la veille de notre retour de vacances, etc Bref, le confort :D  
 IV. Sur les autres systemes  Bien sur, ce principe ne sapplique pas quau Zwave et a l eedomus , il est possible de lutiliser avec les autres technologies, tant quun module On / Off existe: Chacon, X10, PLCbus, etc Le plus difficile sera pour gerer les 4 ordres. Cest possible en Zwave grace a ce nouveau module Fibaro et ses deux relais, mais la plupart du temps nous naurons quun module avec un seul relai, qui permettra de controler les etats Confort et Arret. Un exemple ici avec du Chacon:   Cette mise en place sera egalement possible avec les autres solutions telles que la  Vera , Homeseer, ou encore la  Zibase . Dailleur, cette derniere est sans doute celle a proposer la plus belle interface pour gerer son chauffage:   Pour Homeseer, Kragg62 a recemment ecrit un petit guide pour  utiliser le plugin thermostat virtuel  et l utilisation avec HSTouch . Pour la  Vera , nous verrons demain la mise en place sur ce serveur autonome ainsi que lutilisation avec SQDesigner pour linterface tactile.  
 V. Conclusion  Jai moi meme longtemps hesite a domotiser mes radiateurs, car les signaux a envoyer sur le fil pilote pour controler les differents etats me paraissaient trop techniques pour mes petites competences dans le domaine. Et le fait de me chauffer au bois ne rendait pas cela primordial :p En fait il fallait simplement trouver cette petite diode de redressement et quelques explications. Du coup,meme si je me chauffe au bois, je dispose quand meme de radiateurs electriques (fournis avec la maison), et je pense tous les domotiser de cette facon: et oui, quand on rentre de week end ou de vacances, lhiver, la maison est froide, et le temps de rallumer le feu et de rechauffer la maison, ca peut prendre un certain temps En les domotisant comme ce seche serviette, cela me permettra de les allumer a distance depuis mon iPhone avant quon rentre :p Pour finir, parlons argent :D  Le double module Fibaro coute 62 .  Les diodes seules coutent 0.75, ou 3.90 tout cablees . Soit environ 70 pour gerer les 4 etats sur le radiateur. Vous allez peut etre me dire que cela fait cher, et compte tenu du prix de certains radiateurs, je vous laccorde. Mais il y a une astuce ;-) Dans les maisons recentes, comme la mienne, les radiateurs sont tous pilotes par un fil pilote, gere par un module dans le tableau electrique. En installant le module domotique a cet endroit central, il sera possible de piloter tous les radiateurs de la maison avec un seul module et deux diodes. La ca devient tout de suite plus interessant :D Bon, ca a lavantage de ne pas couter cher de cette facon, mais ca a linconvenient de ne pas pouvoir piloter chaque radiateur individuellement. A voir selon les besoins Mais comme vous le voyez, il est tout a fait possible de piloter ses radiateurs electriques via son systeme domotique ! Je remercie au passage  Planete Domotique  et  Kragg62 pour leurs explications , et les quelques ressources quils mont permis de reutiliser (notamment les schemas de cablage ;-)   chauffage   eedomus 
        </text>
</document>
