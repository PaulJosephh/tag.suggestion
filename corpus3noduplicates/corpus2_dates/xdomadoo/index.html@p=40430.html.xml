<document>
	<date>2014-08-07</date>
        <title>Les scnarios dans JEEDOM</title>
        <author> Laurent </author>
        <tags_set>
                <tag>domotique</tag>
                <tag>guide</tag>
                <tag>jeedom</tag>
                <tag>logiciel</tag>
                <tag>open source</tag>
                <tag>scenarios</tag>
                <tag>tuto</tag>
        </tags_set>
        <categories_set>
                <category>Guide Domotique Jeedom</category>
        </categories_set>
        <text>
                                                         Apres la presentation de JEEDOM linstallation et la premiere mise en fonctionnement JEEDOM A quoi sert un scenario ? Un scenario est un ensemble de commandes ou dactions qui vont sexecuter suite a son declenchement. Le declenchement peut etre manuel (a laide dun smartphone, dune tablette, dun ordinateur etc), active par un capteur (detection de fumee, dinondation, douverture etc) ou programme (a laide dun agenda ou dun calendrier). 1. Le scenario lumiere off Il permet deteindre toutes les lumieres (qui sont commandees par le dimmer de  Fibaro Nous allons maintenant detailler la realisation de ce scenario, pour lexemple je lappellerai Test. Depuis le dashboard on accede au scenario par longlet scenario. Puis on cree le scenario par le bouton +Nouveau scenario. On nomme le scenario, ici le nom sera Test. On arrive ensuite a ce niveau. On peut choisir un groupe pource scenario (alarme, lumiere, chauffage etc) et ainsi pouvoir afficher sur une vue les scenarios dun meme groupe. Le bouton actif coche rend le scenario actif cest a dire executable et visible le rend visible dans le dashboard si il est associe a un objet. On peut associer le scenario a un objet, ici on peut lassocier a Maison car il interviendra dans plusieurs pieces de la maison. On choisit ensuite le mode du scenario :  provoque : en lactivant par un declencheur ou directement depuis le dashboard avec la commande executer. Dans notre exemple nous avons choisi provoque et pas par un declencheur mais par lexecution du scenario. Ensuite on ajoute un element par le bouton +Ajouter Element et on choisit Action puis Enregistrer. Puis on ajoute une action par le bouton + Ajouter action. On va appuyer sur le bouton commande, le petit carre a droite du rectangle blanc puis on va choisir lobjet, ici la cuisine puis lequipement a savoir la lumiere et enfin la commande off, puis valider. On ajoute une autre action par le meme bouton + Ajouter action et cette fois on va selectionner le salon, la lumiere et off. Enfin on sauvegarde par le bouton vert Sauvegarder et cest terminepour ce scenario. On peut facilement le tester en lexecutant et constater que si les lumieres sont allumees, elles doivent seteindre. 2. Le scenario simulateur de presence Il permet dallumer et deteindre des lumieres (ou tout autre equipement) de facon aleatoire pour simuler votre presence lorsque vous etes absent. Voici le scenario simulateur de presence en entier. On remplit le nom, le groupe, actif, visible et objet parent comme vu precedemment (cadre 1). Grace au plugin meteo on peut recuperer lheure du coucher de soleil necessaire au bon fonctionnement du scenario. On choisit ici le mode du scenario provoque, on ajoute un declencheur par le bouton +Declencheur et on va chercher grace au bouton a droite linformation coucher du soleil de lobjet meteo. (Cadre 2) Ce scenario se declenchera donc tous les jours a lheure du coucher du soleil. Grace au plugin Alarme je vais recuperer les informations alarme active et mode (total ou partiel). On ajoute maintenant lelement Si/Alors/Sinon avec le bouton + Ajouter Element. Le scenario doit continuer son fonctionnement si lalarme est active ET si le mode est total. En effet le simulateur a une reelle utilite lorsque vous etes absent de la maison dou la double condition. On remplit donc le SI avec linformation alarme active avec le bouton de selection de commande a droite ainsi que le mode de lalarme. La premiere condition doit etre testee egale a 1 pour etre vraie et la seconde a Total.(Cadre 3) Le  indique la syntaxe ET. Si toutes les conditions sont reunies, alors on peut commencer la simulation de presence. On utilise la fonction SLEEP en ajoutant une action par le bouton + Ajouter action. Elle permet dattendre un temps determine avant dexecuter laction suivante. Une fois ce temps ecoule, on allume la lumiere du salon en procedant de la meme facon que dans le premier scenario, a savoir appuyer sur le petit carre a droite du rectangle blanc puis on va choisir lobjet, ici le salon puis lequipement a savoir la lumiere et enfin la commande, on. Jutilise encore la fonction SLEEP pour laisser la lumiere allumee un temps determine.(Cadre 4) On a indique plus tot que la fonction SLEEP a besoin dune duree en secondes comme parametre mais au lieu de donner une valeur fixe, on utilise la fonction RAND(X,Y) qui va nous donner un nombre compris entre X et Y. Dans mon premier exemple, jindique RAND(0,1800) ce qui signifie que la fonction va me retourner aleatoirement une valeur comprise entre 0 et 1800 secondes donc entre 0 et 30 minutes. (Cadre 5) Il est important de comprendre quun jour on va peut etre avoir la valeur 503 puis un autre jour la valeur 997 ce qui donnera un fonctionnement aleatoire de ce scenario. On termine en allumant et eteignant la lumiere de la cuisine puis on revient dans le salon pour terminer le scenario. (Cadre 6) En resume ce scenario se lancera tous les jours, a lheure du coucher du soleil. Toutefois si lalarme est desactivee ou en mode partiel, le simulateur de presence ne touchera pas aux lumieres. Il faut pour cela que lalarme soit active et en mode total.  Un grand merci a Sylvain(alias Gerandhal), beta testeur de  JEEDOM   Simple Share Buttons Adder (5.6) simplesharebuttons.com  
 Ces sujets pourraient vous interesser aussi: 
 
 Plugin Thermostat JEEDOM : pour le controle total de votre chauffage 
 Jeedom  Guide dutilisation de la telecommande Soft Remote NodOn EnOcean 
 Jeedom  Guide dutilisation du detecteur dinondation Fibaro FGFS-001 END .entry-content  
        </text>
</document>
