<document>
	<date>2014-12-24</date>
        <title>Jeedom  Guide dutilisation du dtecteur de mouvement Fibaro FGMS-001</title>
        <author> Maximin </author>
        <tags_set>
                <tag>detecteur</tag>
                <tag>fgms-001</tag>
                <tag>fibaro</tag>
                <tag>guide</tag>
                <tag>jeedom</tag>
                <tag>motion sensor</tag>
                <tag>mouvement</tag>
                <tag>tuto</tag>
        </tags_set>
        <categories_set>
                <category>Guide Domotique Jeedom</category>
        </categories_set>
        <text>
                                                         On ne presente plus aujourdhui  le detecteur de mouvement de FIBARO FGMS-001 domotique Z-Wave Jeedom Z-Wave 1. Presentation Le detecteur de mouvement de  FIBARO La documentation explique clairement comment installer le FGMS-001 de facon a couvrir la zone de detection, en positionnant le module perpendiculairement aux portes. Le constructeur fournit une courbe de la zone de travail qui peut setendre jusqua 7m. Le positionnement en hauteur preconise est de 2,4m et une correction doffset est prevue pour ajuster la temperature mesuree a celle correspondant a lambiance de la piece. Le detecteur fonctionne avec une pile Lithium CR123A et comme tout dispositif sur pile, il faut etre particulierement  vigilant Z-Wave 2. Association au reseau  Z-Wave Dans un premier temps, il faut recuperer le plugin  Z-Wave domotique Z-Wave Jeedom Apple-converted-space Apple-converted-space Z-Wave Note Jeedom Nous allons maintenant proceder a linclusion du module. Selectionnez le menu Plugins, Protocole  Domotique Z-Wave Dans le menu de gauche, vous pouvez observer un bouton permettant de mettre en mode inclusion un nouveau module. Il est fortement conseille de proceder a lexclusion avant linclusion et la documentation donne les instructions: Pour lexclusion Sassurer que le module est alimente, Mettre  Jeedom Faire un triple-clic rapide sur le bouton B, situe a linterieur du module La LED devient bleue pour indiquer que le module a bien ete exclu du reseau Pour linclusion Sassurer que le module est alimente (retirer la languette de la pile) Rapprocher le detecteur du controleur  Jeedom Mettre  Jeedom Faire un triple-clic rapide sur le bouton B, situe a linterieur du module (voir image ci-dessus): la LED devient bleue, Le detecteur de mouvement va etre inclus dans le reseau  Z-Wave Jeedom Attendre que  Jeedom Comme tous les modules sur pile, la configuration peut etre longue et si le detecteur sendort, il sera necessaire de le reveiller par un triple-clic rapide sur le bouton B. Lorsque linterview est complete, cest a dire que le module adonne toutes ses informations, la led bleue seteint, et  Jeedom Noubliez pas de cliquer sur le bouton Sauvegarder en bas de la page. 3. Parametrage La configuration recuperee ici correspond aux valeurs usine, et selon lutilisation que vous souhaiterez faire du module, il vous faudra ajuster certains parametres. Pour acceder a la fenetre de reglage, cliquez sur la cle a mollette a cote du champ module, dans la zone dinformations. Groupes dassociation : Ce module possede trois groupes dassociation, seul le troisieme est indispensable. Un parametre important : le  Wakeup Il correspond a lintervalle entre 2 instants de reveil du module qui lui permet de recevoir et de transmettre ses parametres. En  phase Jeedom  Les parametres de configuration permettent de regler les seuils des differents capteurs et chacun les adaptera a son application. Il est preferable de Pour mon application personnelle, jai ainsi modifie le mode de fonctionnement de lanti-sabotage (parametre 24 initialement a 0, passe a 1 pour annuler lalarme au bout de 30s), et ajuste lintervalle de temps entre 2 rapports de luminosite (parametre 42 initialement a 0, change pour une valeur de 300s de facon a forcer lenvoi de la valeur vers Jeedom). Il existe de nombreux parametres pour regler ce capteur, on se reportera aux explications decrites dans la notice dutilisation du module. Une fois tous les parametres ajustes, noubliez pas daugmenter le Wakeup (valeur conseillee: 7200s soit 2h). En fermant la fenetre de configuration du module, on revient sur la page generale du module, sur laquelle on peut tester chacune des commandes: Presence Temperature Luminosite Anti Sabotage La colonne parametre permet egalement de configurer la prise en compte des valeurs dans Jeedom (historiser, afficher, Evenement, Inverser) et en option les unites et les bornes de validite des grandeurs physiques. 4. Utilisation En retournant sur le dashboard (Manu Accueil/Dashboard), on voit apparaitre la tuile associee au module (widget): Il est alors facile de faire fonctionner le detecteur de presence: en passant la main, la led du capteur sallume et en secouant le capteur, un bref eclair multicolore indique la prise en compte de la tentative de sabotage. Sur le widget, les icones changent egalement, la luminosite et la temperature sont affichees, montrant ainsi que le module est operationnel. Nous allons ainsi pouvoir lutiliser avec les autres equipements de notre systeme  domotique Astuce 5. Scenario Allumer une lampe sur detection de presence : Voyons maintenant un cas concret dutilisation. Nous souhaitons allumer une lampe sur detection de presence. Elle doit rester allumee au moins 10 minutes et chaque nouvelle detection relance la temporisation. Pour realiser cette fonction, nous allons utiliser la notion de variable, qui permet de memoriser une donnee ou une valeur numerique. Ainsi, nous creons un scenario qui a pour evenement declencheur la commande presence du detecteur de mouvement. Le principe du scenario consiste a memoriser dans une variable lheure a laquelle doit seteindre la lampe, mise a jour a chaque detection de presence. Cette variable doit etre examinee regulierement par le scenario jusquau moment ou la lampe est eteinte. Il faut donc que le scenario ait aussi un mode programme, toutes les 2 minutes par exemple. La logique du scenario Si un mouvement est detecte, alors la lampe est allumee. On memorise dans la variable HeureExtinction lheure actuelle + 10 minutes (#time# + time(10)); Sinon, le capteur de presence ne detecte plus de mouvement, alors si lheure actuelle est superieure a celle memorisee dans la variable HeureExtinction, on eteint la lampe. Chaque detection de presence prolongera lheure dextinction de 10 minutes. Amelioration et optimisation du scenario: Nous allons ameliorer ce scenario en faisant intervenir egalement le capteur de luminosite. En effet, il nest pas necessaire dallumer notre lampe en pleine journee. Nous allons donc activer cette fonction uniquement lorsque la luminosite est inferieure a 50 lux. Par ailleurs, le scenario ci-dessus presente un inconvenient: il possede un mode programme toutes les 2 minutes, ce qui nest pas necessaire lorsque la lampe est eteinte, en cas dabsence prolongee. Nous allons donc creer 2 scenarios: le premier soccupe dallumer la lampe sur detection de presence et active le 2eme, dont le role est deteindre la lampe lorsque les 10 minutes sans detection de presence sont ecoulees. Ce scenario se desactive lorsque la lampe seteint. Scenario 1 Scenario 2  Et voila. Il existe de nombreuses possibilites de programmation, car Jeedom, par le nombre de ses fonctionnalites permet de modifier facilement cette application et de ladapter a vos besoins. Par exemple, on peut aussi tenir compte des heures du lever et de coucher du soleil avec le plugin meteo. Nous avons vu dans cet article comment Jeedom pouvait integrer le capteur FGMS-001 de  Fibaro domotique Un grand merci a Pierre(alias Toregreb), beta testeur de  JEEDOM  Simple Share Buttons Adder (5.6) simplesharebuttons.com  
 Ces sujets pourraient vous interesser aussi: 
 
 Guide dutilisation du detecteur de mouvement Fibaro FGMS-001 avec la base domotique Homelive dOrange 
 Jeedom  Guide dutilisation du module volet roulant FGRM-222 de Fibaro 
 Jeedom  Guide dutilisation du detecteur autonome de fumee Fibaro FGSD-002 
 Jeedom  Guide dutilisation du micromodule commutateur double Z-Wave Fibaro FGS-221 END .entry-content  
        </text>
</document>
