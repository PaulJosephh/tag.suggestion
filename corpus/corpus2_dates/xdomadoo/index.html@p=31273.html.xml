<document>
	<date>2014-03-10</date>
        <title>Guide dinstallation du dtecteur dinondation Fibaro FGFS-101 avec le Home Center 2</title>
        <author> Bruno </author>
        <tags_set>
                <tag>capteur</tag>
                <tag>capteur d'inondation</tag>
                <tag>fgfs-101</tag>
                <tag>fibaro</tag>
                <tag>guide</tag>
                <tag>hc2</tag>
                <tag>Home Center 2</tag>
                <tag>inondation</tag>
                <tag>tuto</tag>
                <tag>z-wave</tag>
        </tags_set>
        <categories_set>
                <category>Guide Domotique Z-Wave</category>
                <category>Z-Wave Applications</category>
        </categories_set>
        <text>
                                                         Le Home Center 2 communique nativement en utilisant la technologie  Z-Wave 1- Installation Rendez-vous sur linterface de votre controleur  Fibaro Cliquez ensuite sur Add or remove device situe a gauche de votre interface. Cliquez sur le bouton Ajouter dans la rubrique Ajouter un module pour inclure ce module. Si votre module a deja ete inclus dans un autre reseau  Z-Wave Apres avoir clique sur Ajouter (dans la rubrique Ajouter un module), une nouvelle fenetre nommee Ajout des modules apparait avec un compte a rebours durant lequel vous devez appuyer brievement (1.5 seconde) trois fois sur le bouton dapprentissage (le bouton dinclusion de votre module  Z-Wave Ce bouton dapprentissage est situe a linterieur de votre module. Une fois que votre module est detecte par votre Home Center 2, celui-ci va etre configure automatiquement. Il apparait desormais dans linterface de votre controleur dans la rubrique Modules, sous la forme de deux modules : un detecteur dinondation et un detecteur de temperature. 2- Configuration Apres avoir correctement installe votre module, vous allez pouvoir configurer ses parametres (dans la rubrique Modules de votre interface). Dans la categorie General de votre module, vous pouvez indiquer son nom, la piece dans laquelle il se situe. Vous pouvez egalement visualiser les informations de ce module : genre, type de module, fabricant, version, configuration et ID. Dans notre exemple, nous indiquons quil sagit dun detecteur dinondation (pensez a sauvegarder dans la barre situe a droite de votre ecran). Dans la categorie Avance, vous pouvez visualiser et configurer des parametres supplementaires. Voici les parametres que vous pouvez configurer : Avance : Intervalle de reveil(s) : Intervalle de reveil de ce module. Celui-ci se reveillera periodiquement en notifiant le controleur (etat batterie) et permettra ainsi daugmenter la longevite des piles mais en contre partie, les requetes vers ce module seront emises lors de son reveil. Delai entre chaque interrogation :Vous pouvez definir un temps pour demander a ce dispositif si il est vivant plus frequemment que dans le reglage dun delai dinterrogation du Zwave dans un reseau Zwave. Ne pas marquer comme mort :Votredispositifnedoit pas etre marque commemort, meme si vousle desactivez. Notify when battery low via e-mail : Etre averti en recevant une notification par email lorsque la batterie est faible. Use template for parameters :  Utiliser ou non le modele pour les parametres. Sauvegarder les journaux dans le panneau devenements. Minformer : Par  SMS SMS Par email : Vous etes informe par email pour lallumage, lextinction ou changement de statut du module. Par notification Push : Vous recevez une alerte dinformation sur lecran de votre tablette ou smartphone pour lallumage, lextinction ou changement de statut du module. Description du module : Associations : Configuration : Parametre 1 :  Delai dannulation dune detection  d . Periode durant laquelle le detecteur dinondation  Fibaro Parametre 2 :  Diode de signalisation de lalarme sonore / annulation. Parametre 5 :  Type de trame dalarme envoye aux dispositifs du premier groupe dassociation  ( Ce parametre definit le type de trame dalarme sera envoye aux dispositifs associes en cas de detection ou annulation dinondation Parametre 7 :  Valeur du parametre definissant un  niveau de forcage de la variation / apres lenvoi d La valeur 255 Parametre 9 : Lalarme annule une trame de commande ou desactive (extinction de lappareil) une trame de commande de type basic set (commande basique).  Le parametre permet de desactiver la fonction et lannulation dalarme pour dispositifs du premier g roupe dassociation Si vous reglez la valeur du parametre a 0, une trame de commande BASIC SET sera envoyee avec une valeur de 0 (ou alarme deau = 0). meme apres linondation arrete. Ce statut peut etre annulee manuellement en choisissant annulation dinondation a partir du menu ( Parametre 10 : Intervalle de temperature. Temps, en secondes, entre laffichage consecutif de la temperature du capteur interne de temperature. Si la valeur de la temperature differe de la lecture precedente par la valeur dhysteresis (parametre 12) alors  la nouvelle valeur est rapportee au controleur principal. hysteresis Parametre 13 : Diffusion de lalarme.Une valeur differente a 0 signifie que les alarmes sont envoyees en mode diffusion, cest-a-dire a tous les dispositifs dans la portee du detecteur dinondation  Fibaro 
 
 Parametre 50 : Valeur basse de la temperature. Parametre 51 : Valeur haute de la temperature. Le parametre enregistre la valeur de la temperature pour laquelle la DIODE clignote avec une couleur reglee dans le parametre 62. Par defaut, la diode clignote en rouge. Definition 1  0,01  C Parametre 61 : Couleur dillumination dune basse temperature.  Le parametre enregistre la valeur dune  couleur RVB Le  controleur principal interprete chaque couleur comme une somme de chaque valeur des composants. Chaque couleur peut avoir une valeur de 0 a 255 ou 0 signifie pas de couleur et 255 signifie couleur. COULEUR = 65536 * rouge + vert + 256 * bleu Exemples de valeurs: Rouge 16711680 Vert 65280 Bleu 255 (valeur par defaut Jaune: 16776960 Turquoise 65535 Orange 16750848 Blanc 16777215 Diode de signalisation eteinte  0 Parametre 62 : Couleur dillumination dune haute temperature.  Le parametre enregistre la valeur dune  couleur RVB Le  controleur principal interprete chaque couleur comme une somme de chaque valeur des composants. Chaque couleur peut avoir une valeur de 0 a 255 ou 0 signifie pas de couleur et 255 signifie couleur. COULEUR = 65536 * rouge + vert + 256 * bleu Exemples de valeurs: Rouge 16711680 Vert 65280 Bleu 255 (valeur par defaut Jaune: 16776960 Turquoise 65535 Orange 16750848 Blanc 16777215 Diode de signalisation eteinte  0 Parametre 63 Gestion de signalisation de la diode en fonctionnement normal. Parametre 73 Compensation de la sonde de temperature. Le parametre memorise une valeur de temperature qui doit etre ajoute a a la temperature actuelle mesuree par le capteur de temperature  faire correspondre les lectures du capteur dinondation et le capteur de temperature car la temperature au niveau du sol est generalement inferieure Parametre 74 :  Activer une trame dalarme envoyee au deuxieme groupe dassociation ( / BUTTON_TAMPER). Valeur 0 = bouton de sabotage / mouvement de sabotage sont inactifs Parametre 75 : Duree dalarme des capteurs  Temps pour que le capteur lui-meme signale des inondations visuellement ou sonore.Ce parametre definit la periode de temps au bout de laquelle lalarme deviendra silencieuse. Lalarme restera active, mais le capteur lui-meme mettra la batterie en mode economique. Parametre 76 : Temps de retransmission dune trame dalarme/trame dun Basic Set (commande basique) en cas dalarme dinondation maintenue Ce parametre definit la periode de temps au bout de laquelle la trame dalarme sera retransmise a dautres appareils Valeur 0 = R etransmission de la trame dalarme inactive Parametre 77 : Desactiver ou non les fonctionnalites du capteur dinondation. 3- Exemple de scenario Votre imagination est la seule limite pour creer un scenario. Nous allons prendre un exemple de scenario :  Lorsque mon module FGFS-101 detecte un debut dinondation, mon module ON/OFF Wall Plug FGWPE-101 va se mettre sur ON et activer une sirene dalarme. Vous devez en premier lieu vous rendre dans la rubrique Scenes situe en haut, dans le menu de votre interface. Cliquez ensuite sur Ajouter dans la rubrique Ajouter une scene. Dans General, vous pouvez configurer le nom de la scene et la piece dans laquelle elle se situe, loption dafficher ou non la scene dans linterface, la commande vocale pour mettre en marche ou arret la scene, une option dactivation de la scene, que celle-ci se lance lors du demarrage du Home Center 2, la proteger avec mot de passe et permettre ou non a une alarme qui senclenche darreter la scene. Rendez-vous ensuite dans la rubrique Avance. Vous allez pouvoir creer votre scenario en choisissant lune des deux options :  Ajouter une scene en utilisant les blocs graphiques (blocs aadditionner : condition, action) : Pour creer votre scene en utilisant les blocs graphiques, cliquez sur le bouton +. Un menu va apparaitre pour choisir vos composants. Lorsque vous choisissez un composant (exemple : module), un bouton condition apparait avec les options suivantes : Et, Ou, Alors. Nous realisons le scenario suivant: Si mon module FGFS-101 detecte un debut dinondation alors le module ON/OFF Wall Plug FGWPE-101 va se mettre sur ON et activer une sirene dalarme. Noubliez pas de sauvegarder en cliquant sur Sauver. Veuillez noter que loption  Detecteur Inondation  dans Triggering device est cochee. Cela signifie que votre scenario senclenche automatiquement des la detection dinondation.  Ajouter une scene en LUA (langage de programmation de scripts LUA) : Une autre option pour creer votre scene est en LUA. Cliquez sur Ajouter dans la rubrique Ajouter une scene en LUA. Nous pouvons ecrire notre scene en LUA. Nous voulons creer la scene suivante : Lorsque mon module FGFS-101 detecte un debut dinondation, mon module ON/OFF Wall Plug FGWPE-101 se met sur ON et va activer une sirene dalarme. Ce qui represente, en langage LUA, la scene suivante : SI ALORS FIN Voici les etapes pour la creation de la scene : Etape 1 : Nous allons retenir les numeros identifiants des modules (ID) :  Detecteur dinondation FGFS-101 :  243  Module ON/OFF Wall Plug FGWPE-101 :  230 (Pour retrouver vos numeros identifiants des modules, cliquez sur la rubrique Modules de votre menu puis sur votre module au choix, celui-ci affiche dans General, son numero ID). Etape 2 : Votre scene en langage LUA doit toujours commencer avec l entete [[ %% globals (Cette entete est deja mis en place automatiquement dans votre interface). Etape 3 : Etant donne que nous voulons un declenchement automatique, nous devons utiliser la fonction Trigger IF THEN Call ID SI ON ALORS ON FIN  Pour letat du detecteur dinondation FGFS-101, la valeur  1 Detection 0 Aucune detection  Une action secrit :  fibaro 230 turnOn   Pour finir, il faut indiquer le mot  end Voici notre scene complete : [[ 243 value %% globals local Detecteur Detecteur =  fibaro if (Detecteur == 1) then fibaro end Attention : pour la programmation en LUA, vous devez bien respecter la syntaxe car votre scenario ne pourra fonctionner si il y a une faute de signe, chiffre ou lettre. Ce module FGFS-101 peut bien evidemment servir pour dautres applications (commander lactivation dun eclairage lors dune detection dinondation). Pour plus dinformations sur la creation de scenarios, rendez-vous sur notre article :  Creation de scenarios (blocs graphiques et LUA) avec le Home Center 2  Simple Share Buttons Adder (5.6) simplesharebuttons.com  
 Ces sujets pourraient vous interesser aussi: Aucune proposition. END .entry-content  
        </text>
</document>
