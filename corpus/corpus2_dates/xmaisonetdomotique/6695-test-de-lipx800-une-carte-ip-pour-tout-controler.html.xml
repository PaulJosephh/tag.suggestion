<document>
	<date>2011-09-29</date>
        <title>
Test de lIPX800: une carte IP pour tout contrler ?</title>
        <author>Cdric Locqueneux</author>
        <tags_set>
                <tag>IPX</tag>
                <tag>IPX800</tag>
        </tags_set>
        <categories_set>
                <category>Tests Box Domotique</category>
        </categories_set>
        <text>Si vous avez lhabitude de fouiner un peu sur les forums domotiques, voire meme electroniques, vous avez sans doute deja entendu parler de la carte IPX800. Jen entends moi meme parler depuis un bout de temps, sans avoir eu loccasion dapprofondir le sujet.  GCE Electronics , le concepteur de cette carte, men a gentiment prete une afin que je puisse la decouvrir comme il convient. Loccasion de vous la presenter !  
 I. Presentation  Diverses versions de cette carte sont sorties, et nous en sommes aujourdhui a la version 3, sans aucun doute la plus evoluee. Autrefois livree nue, ce qui semblait la destiner avant tout aux bidouilleurs en electronique, elle est aujourdhui integree dans un boitier rail din, qui permettra de la positionner proprement dans un tableau electrique:    Comme on peut le voir ici, cette carte est relativement consequente, puisquelle mesure 15,7 x 9 x 6 cm. Il faudra donc prevoir lequivalent de 9 emplacements dans votre tableau electrique. Ajoutons a cela un dixieme emplacement pour lalimentation de 12v (en option):    Cote a cote, carte IPX800 et alimentation:   Cette carte prend donc un peu de place, mais il faut dire quelle est extremement complete ! Faisons un peu le tour des connecteurs:   Sur la partie basse de la carte, nous trouvons, de gauche a droite: un bouton reset pour la reinitialisation de la carte, 4 entrees analogiques, assorties dune borne +3,3v et dune masse. Les deux premieres entrees pourront etre utilisees pour deux compteurs dimpulsion 8 entrees digitales tout ou rien (contact sec), accompagnees dune masse un port ethernet pour le reseau un port RJ11 pour une carte dextension I/O supplementaire un connecteur dalimentation, permettant de brancher une alimentation a prise jack Sur la partie haute, nous avons:   un bornier pour une alimentation (comme celle au format rail din) 8 relais, qui peuvent etre NO (normalement ouvert) ou NF (normalement ferme), pouvant supporter jusque 250v en 10A Tous ces borniers sont bien beaux, mais dans les faits, a quoi servent ils ? Cest ce que nous allons maintenant aborder.  
 II. Utilisation  Avant daborder laspect technique des raccordements, nous allons tout dabord etudier sa partie logicielle, qui nous permettra de voir les possibilites de cette carte. La carte IPX800 integre un serveur web, qui permettra de la configurer et la controler. Une fois branchee au reseau et alimentee, il suffira de taper son adresse IP dans le navigateur web de son choix. Cette adresse IP pourra etre facilement identifiee a laide du petit logiciel scandevice fourni (un coup doeil sur les connexions de son routeur le permettra tout aussi bien). Une fois connecte a linterface, nous accedons a ce tableau de bord, qui nous permet davoir letat des deux compteurs (en bas a gauche), letat des relais en sortie (en haut a droite), suivi de letat des entrees digitales, pour enfin finir par les 4 entrees analogiques, preconfigurees ici pour gerer des temperatures:   Le bouton Controles en haut a gauche permettra dactiver ou desactiver rapidement les 8 relais:   Les autres boutons, en cliquant sur Edit, permettront de configurer les differents elements. On pourra ainsi nommer les diverses entrees sorties pour mieux les identifier, ou acceder a des reglages un peu plus pointus. Par exemple, dans le cas dun relai, celui ci pourra etre On/Off, ou fugitif. Ce dernier mode permet de remettre par exemple un relai normalement ferme automatiquement a Off au bout dun temps predetermine (Off delay). Lutilisation typique est pour louverture dune gache electrique ou dun portail: en general on active un contact sec 2s, juste le temps dactiver louverture ou fermeture automatique du portail ou de la gache.  
 La prochaine mise a jour, prevue pour mi octobre, permettra meme de regler un delai avant lactivation, comme on peut le voir sur la capture ci dessus. Detail important, le temps dactivation pour le mode fugitif est personnalisable pour chaque relai, ce qui permettra davoir par exemple 2s pour le portail, et 5s pour la gache electrique. Dautres parametres sont disponibles pour les entrees analogiques, notamment, qui sont prereglees pour gerer des sondes de temperature:  
 Differents capteurs pourront etre connectes a ces bornes analogiques. Dailleurs, la prochaine mise a jour integrera une liste deroulante permettant de configurer automatiquement les entrees en fonction des capteurs connectes. GCE Electronic prevoit deja la commercialisation de nouvelles sondes pour tres bientot, telles que: 1 capteur de temperature (resolution 0.1 , precision +/-1) 1 Capteur dhumidite sur base de capteur Honeywell (Precision +/- 3%) 1 capteur combinant les 2 premiers ( temperature/humidite) 1 capteur de luminosite Concernant les entrees, digitales ou analogiques, elles peuvent etre liees directement a des relais. Un exemple sera plus concret: Si on veut mesurer le niveau de son bassin a poissons, a lexterieur, et le remplir automatiquement a laide de son puits via une pompe a enclencher automatiquement sil descend en dessous dun certain niveau: sur lentree digitale 1 on pourra connecter un detecteur de niveau de ce type: et sur le contact relai en sortie le controle dune pompe. sur la configuration de lentree digitale, on liera le relai 1 a lentree digitale 1.  Ainsi, automatiquement, si le niveau est trop bas, cela declenchera le capteur de niveau, et lIPX se chargera de declencher la pompe. Cest ce quon appelle couramment en domotique un scenario, ici tres simple a mettre en oeuvre. Le meme principe sera applicable pour gerer des radiateurs, cette fois en utilisant des capteurs de temperature sur les entrees analogiques de la carte. En plus de ces reglages, nous trouvons sur le bas un menu permettant dacceder a de nombreux autres parametrages.  
 1. Preset  Lecran Preset permettra dexecuter plusieurs actions simultanement sur des relais:   
 2. Timers  La page Timers permet, comme son nom le laisse supposer, de creer des calendriers, des taches programmees:   Il sera possible de creer jusqua 24 programmations, pour un jour et une heure donnes. On pourra par exemple programmer louverture de ses vannes darrosage tous les soirs a 20h, en activant le/les relais concernes.  
 3. I/O Settings  Cest ce que nous avons explique plus haut avec le bassin a remplir automatiquement. Sur cette page, on peut donc affecter chaque entree digitale a un relai. On peut egalement declencher une alerte par mail, pour etre alerte par exemple dune inondation.   
 4. DynDNS  Le dynDNS permettra dacceder a lIPX800 de lexterieur si on na pas dadresse IP fixe. On cree un compte sur le service DynDNS (ou No-IP, etc), ce qui permet davoir une adresse du type chezmoi.dyndns.com, beaucoup plus simple a retenir quune adresse IP.   
 5. Lan Setting  Cette page concerne les parametres reseau. Tres classique:   Pour lutilisation dune telle carte, on conseillera laffectation dune IP fixe, histoire de ne pas avoir a la chercher tout le temps pour controler sa carte. Si on souhaite acceder a sa carte depuis lexterieur, il sera aussi possible de definir un nom dutilisateur et un mot de passe pour securiser lacces.  
 6. Advanced Settings  On trouvera ici des reglages interessants, comme: la memorisation de letat des relais: en cas de coupure de courant, les relais se remettront dans leur etat initial apres le redemarrage reglage du port HTTP, regle par defaut sur le 80 reglage dun serveur NTP pour le reglage automatique de lheure, et ajustement de celle ci par rapport au fuseau horaire (pour prendre en compte le passage a lheure dete par exemple), tres utile bien sur pour une programmation horaire correcte  Sur la page suivante, nous pourrons regler les parametres de messagerie, afin que la carte puisse nous envoyer une alerte par mail en cas de besoin:   
 7. M2M  Le menu Machine 2 Machine:on determine ici un port de connexion pour la communication TCP:   En effet, il sera possible de controler la carte IPX a laide de commandes TCP depuis une autre machine. Les ordres seront de ce type: Set10 passera le relai 1 en position Off Set11 passera le relai 1 en position On Pour envoyer une commande en mode impulsion (fugitif), on utilisera la meme commande, avec un p derriere (Set11p passera le relai 1 a On en mode fugitif) Ensuite, un menu particulierement interessant: la configuration Push. Il est possible ici de renseigner les parametres Push (Url, chemin, et port) qui permettront a lIPX denvoyer une notification instantanee sur son portable sur declenchement dun evenement (inondation, detection de temperature, etc). On pourra utiliser un service comme Pushme.to,  Prowl (presente ici ), etc   Avec Prowl, on indiquera sur la premiere ligne prowl.weks.net, et sur la suivante /publicapi/add?apikey= macleapiprowl application=ipx800description= On pourra donc recevoir ce genre de notification des que quelque chose se produit:   Comme il sagit en fait dun appel dURL, cette fonction pourra etre utilisee pour dautres choses, comme lenvoi dune info au Nabaztag / Karotz, lenregistrement dune valeur pour une representation graphique sur un site comme Pachube, etc  
 8. Upload New site  Le serveur Web integre a lIPX800 est deja complet, et sadapte meme automatiquement au type dappareil qui sy connecte, par exemple avec un iPhone:    Mais si malgre tout vous souhaitez modifier linterface, et bien cela est tout a fait possible.  
 III. Utilisation concrete  Avec tout cela, on sent deja que cette carte est tres puissante. Pourtant, concretement on peut avoir du mal a se representer les utilisations possibles. Dans les grandes lignes: les entrees analogiques permettront de brancher des capteurs renvoyant une certaine valeur, comme des sondes de temperature (pour une gestion de chauffage), une mesure de luminosite (utile pour gerer lallumage des lampes), etc Detecteur crepusculaire 
 les entrees digitales sont des entrees tout ou rien, soit On, soit Off. On pourra donc y brancher des interrupteurs, des detecteurs de mouvement, douverture, de niveau, etc Detecteur de proximite (= d'ouverture)  les compteurs dimpulsion pourront mesurer la consommation deau ou denergie, par exemple, en y branchant le capteur adequat Compteur d'energie  enfin, les relais, qui pourront etre branches soit en normalement ouvert, soit en normalement ferme, selon le besoin. Les relais sont comme des interrupteurs, capables ici de supporter une tension allant jusqua 250v et 10A. Un relai est capable dactionner une lampe, un moteur (volet, portail), une pompe, etc Sachant cela, la seule limite semble etre limagination: cette carte pourra en effet tout gerer dans une maison, quil sagisse du confort, ou de la securite. On peut tout a fait imaginer faire un circuit electrique en etoile pour les luminaires: la carte IPX dans le tableau electrique, et chaque interrupteur, et chaque luminaire allant directement vers le tableau electrique. En cablant la carte IPX, il sera facile de determiner que tel interrupteur doit controler telle lampe. Ainsi, on pourra allumer la lumiere depuis linterrupteur local, mais egalement depuis linterface de lIPX (iPhone, internet, ou controle depuis un autre equipement). En utilisant des sondes de temperatures, on pourra controler letat des radiateurs a laide des relais, pour les passer en mode eco ou en mode confort. Avec des capteurs douverture, des detecteurs de presence, et un clavier filaire, il sera tout a fait possible de gerer une alarme avec les entrees, qui declencheront la mise en route dune sirene (relai en sortie) et enverront une notification Push pour nous avertir. Sur le  forum GCE Electronic , une ressource a ne pas negliger, vous trouverez meme un plan permettant de controler vos volets roulant (la carte permettra de piloter 4 volets, chaque volet necessitant deux relais). Une petite video du fonctionnement:  Il sagit ici dun exemple basique: le controle dune lampe de 60w en 220v, le controle dune autre lampe en mode fugitif (pour illustrer le fonctionnement avec une gache: activation du relai, et desactivation automatique apres 2s), et enfin le controle dun moteur en 12v continu (comme on pourrait le faire avec un volet electrique).  
 IV. Conclusion  Il est difficile de demontrer tout ce dont est capable cette carte, mais jespere que cette petite presentation vous en aura donne un apercu. Elle est si complete quelle semble capable de controler quasiment nimporte quoi chez vous. Vendue 178 , comparee aux modules contacts sec vendus dans les differentes technologies (aux alentours de 50 le module), elle est tres interessante, dautant plus quelle pourra sinterfacer facilement avec dautres equipements ( Zibase ,  Vera , Homeseer, etc) grace a son controle via des requetes HTTP. Mais comme on la vu, on peut aller beaucoup plus loin et baser toute son installation domotique dessus. Il faudra alors peut etre utiliser plusieurs de ces cartes, ou y adjoindre des cartes filles, les 8 relais ne suffisant pas dans ce cas. Par contre, pour une utilisation aussi poussee, de bonnes connaissances en electricite seront necessaires afin dassurer la securite de lequipement et des personnes. Bref, cette carte est une petite merveille ! Le seul reproche quon pourrait lui faire ? Et bien cest a la fois son point fort et son point faible: le cablage. Pour controler toute sa maison, il faudra prealablement prevoir tout le cablage necessaire dans celle ci, afin que lIPX en soit le centre. Ce nest pas evident si tout est deja installe. Mais si cela est possible, une telle installation sera parmi les plus fiables quon puisse trouver, puisque entierement basee sur de lIP. De plus, linstallation en elle meme ne consommera quasiment rien, puisque lIPX800 consomme entre 2 et 5w, selon le nombre de relais actives. On est tres loin de la consommation dun serveur traditionnel Comme il y a encore beaucoup a en dire, et pour continuer a vous montrer son interet, je vous presenterai dans les jours qui viennent son utilisation avec la  Zibase , la  Vera , ainsi quavec Homeseer. A suivre tres bientot, donc ;-)   IPX   IPX800 
        </text>
</document>
