<document>
	<date>2012-12-11</date>
        <title>
Test de la box domotique Domot MX-465</title>
        <author>Cdric Locqueneux</author>
        <tags_set>
                <tag>IPX800</tag>
                <tag>MX-465</tag>
                <tag>Une</tag>
        </tags_set>
        <categories_set>
                <category>Tests Box Domotique</category>
        </categories_set>
        <text>Domot MX  ma fait parvenir en test sa box MX-465, un petit boitier destine a piloter la maison a laide de ses nombreuses entrees / sorties filaires. Les connaisseurs y verront certainement une ressemblance avec la maintenant bien connue carte  IPX800 , que nous avons testee il y a quelques mois. Pourtant, la MX-465 va plus loin sur bien des aspects. Je vous propose donc aujourdhui den faire le tour.   
 I. Presentation  La MX-465 se presente sous forme dun petit boitier, mesurant 13x10x3cm. Elle est basee sur un materiel de la societe australienne  Modtronix , deja largement utilise en milieu industriel. Elle est livree avec une alimentation de 9v, mais la MX-465 est capable de fonctionner avec une alimentation allant de 7.5v a 40v.   Elle ma ete envoyee avec le cable pour le releve teleinfo, normalement vendu en option ( 14,95 assemble , ou  4,95 a assembler soit meme ). Cest la premiere bonne surprise, que nous verrons plus en details plus loin   Cote connectique, cest assez complet. A larriere, on trouve4 entrees protegees par optocoupleurs (2-30V), une prise ethernet pour le reseau, et le connecteur dalimentation:   A lavant, nous avons une serie de 16 voyants pour indiquer letat des relais et des entrees. Ensuite, nous avons6 entrees analogiques (0-5V, dont 4 parametrables via jumpers a 0-26V, et 2 entrees qui peuvent etre configurees pour acquerir la teleinformation), et5 sorties relais prevues pour 24V (relais 7A 250VAC charge resistive) pouvant etre utilises en normalement ouvert ou normalement ferme:   Les connecteurs verts sont enfichables, et donc demontables rapidement pour un montage plus facile. Petit apercu du cable pour la teleinfo:   Les deux fils gris sont a connecter aux bornes teleinfo du compteur. Les fils bleu et rouge sur la masse et la phase de la carte, et le fil jaune sur lentree 5 ou 6, de cette facon:   
 II. Interface  La MX-465 embarque un serveur web qui contient tout ce quil faut pour gerer la carte.Une fois branchee au reseau et alimentee, il suffira de taper son adresse IP dans le navigateur web de son choix. Cette adresse IP pourra etre facilement identifiee a laide du petit logiciel fourni (ou un coup doeil sur les connexions de son routeur le permettra tout aussi bien). Linterface est ce qui fait toute la force de cette carte. Elle est relativement complete, mais nous allons essayer den faire le tour. Pour plus dexplications, je vous invite a consulter le  Wiki de Domot-MX , tres bien documente. Detail important: linterface est entierement en francais. Normal, elle est developpee par un francais. Sur la page daccueil, nous retrouvons les principaux controles de la carte: les six entrees analogiques, qui pourront par exemple relever des temperatures, ou des compteurs, par exemple. Nous avons ensuite les entrees Opto, qui pourront par exemple accueillir des interrupteurs, puis les relais, qui pourront etre pilotes directement en On, Off, ou avec minuterie (pratique pour une gache electrique par exemple). Comme on le voit la temporisation est personnalisable pour chaque relai. Nous avons egalement une notion de Memstates, qui pourront etre utilises pour declencher des scenarios, notamment. Nous y reviendrons plus loin. Pour mieux sy retrouver, un double clic sur le nom dun element permet de le renommer comme on souhaite, ce qui est tres pratique.   Passons maintenant a des fonctionnalites plus precises.  
 2.1 Teleinfo  Comme nous lavons evoque plus haut, cette carte est capable de lire les informations teleinfo, en y connectant simplement le cable adequat. La teleinfo peut etre utilisee sur les ports analogiques 5 et 6, il sera donc possible de lire les informations de deux compteurs (par exemple consommation et production). Une fois le cable connecte, il faut activer le port pour la teleinfo, dans les parametres avances:   Au bout de quelques secondes, les informations safficheront dans la partie teleinfo:   Ces informations sont egalement disponibles dans un fichier xml, a ladresse http://domotboard/protect/teleinfo.xml :   Il sera donc tres facile de recuperer ces informations si on le souhaite sur dautres box capable de lire un fichier xml:  eedomus ,  Vera ,  Zibase  La MX-465 etant capable denvoyer des requetes Push (requetes HTTP), il sera egalement possible denregistrer ces informations dans une base exterieure, et meme denvoyer automatiquement sa production photovoltaique au site  BDPV , par exemple ! Cette carte est egalement capable dexecuter des scenarios avec differents declencheurs, les infos teleinfo pouvant en faire partie (declenchement dun ballon deau chaude pendant les heures creuses, delestage en cas de surconsommation, etc).  
 2.2 Extensions M2M  Une capacite, qui nest pas des moindres, et celle de pouvoir controler dautres cartes, telles que des IPX, MX-465, ETH pour etendre les entrees / sorties de la MX-465.   On peut selectionner dans le haut de lecran le modele de lextension, ce qui va completer automatiquement le parametrage. Il ny a alors plus qua indiquer ladresse IP de la carte dextension, puis affecter les entrees / sorties de la carte dextension a de nouvelles entrees / sorties virtuelles de la MX-465. Ces entrees / sorties font alors partie integralement de la MX-465, et viennent safficher sur la page daccueil de celle ci:   Comme les composants propres a la MX-465, on peut les renommer, et les utiliser dans des scenarios. Lutilisation des cartes dextension est completement transparente. Dailleurs, il est temps de se pencher sur cette partie  
 2.3 Les scenarios  Les scenarios permettent de faire des choses tres complexes si on le souhaite. Commencons par un exemple simple pour illustrer leur utilisation: ici, jactive le relai 2 qui pilote mon chauffe eau si la periode tarifaire indiquee par la teleinfo passe en Heures Creuses. Je me fais egalement envoyer un email pour men informer:   La premiere partie concerne les actions a effectuer, sur les relais, les Memstates, ou encore le notifications. Ces dernieres pourront etre un envoi par mail, ou toute requete HTTP, par exemple vers le service  PushingBox  pour se faire envoyer une notification Push sur son mobile ou faire parler le  Karotz , enregistrer des evenements sur un serveur distant, etc Les memstates permettent denchainer les conditions pour creer des scenarios complexes. Ces valeurs peuvent fonctionner comme relais et comme entree. Ellespeuvent aussi etre changes par la page daccueil, et donc servir de boutons pour lancer un scenario donne. Ca peut paraitre un peu abstrait au depart, il faut jouer un peu avec pour se rendre compte de leur puissance. La seconde partie concerne les declencheurs, qui peuvent etre nombreux, et meme se cumuler a laide doperateurs IF / AND / OR. Un scenario pourra donc se lancer sur activation dun relai, sur lecture dune valeur (temperature par exemple, que ce soit sur la carte MX-465 ou sur lune de ses extensions), sur activation dun memstate, mais egalement selon un calendrier ou une minuterie:   Declenchement sur une minuterie, ou sur un seuil de valeurs:   Bien sur, que ce soit pour les calendriers, les minuteries, ou les seuils, tout cela peut etre personnalise dans les parametres ou en double cliquant sur la valeur souhaitee, selon les cas:   Enfin, dernier declencheur possible, les informations teleinfo, qui comprennent meme la couleur du lendemain pour pouvoir anticiper certaines actions:   Comme vous le voyez, les possibilites au niveau des scenarios sont enormes, que ce soit pour gerer une alarme, son eclairage, son chauffage, etc Et il est possible de creer comme cela jusqua 32 scenarios.  
 2.4 Les parametres  De nombreux parametres classiques sont bien sur disponibles: affectation dun mot de passe a la carte configuration dun serveur de temps configuration dun serveur email configuration dun serveur push utilisation dun DynDNS si on na pas dadresse IP fixe etc   
 III. Utilisation concrete  Avec tout cela, on sent deja que cette carte est tres puissante. Pourtant, concretement on peut avoir du mal a se representer les utilisations possibles. Elles sont a peu pres les memes que ce que nous avions deja presente pour lIPX: les entrees analogiques permettront de brancher des capteurs renvoyant une certaine valeur, comme des sondes de temperature (pour une gestion de chauffage), une mesure de luminosite (utile pour gerer lallumage des lampes), etc les entrees opto sont des entrees tout ou rien, soit On, soit Off. On pourra donc y brancher des interrupteurs, des detecteurs de mouvement, douverture, de niveau, etc enfin, les relais, qui pourront etre branches soit en normalement ouvert, soit en normalement ferme, selon le besoin. Les relais sont comme des interrupteurs, capables ici de supporter une tension allant jusqua 250v et 7A. Un relai est capable dactionner une lampe, un moteur (volet, portail), une pompe, etc Sachant cela, la seule limite semble etre limagination: cette carte pourra en effet tout gerer dans une maison, quil sagisse du confort, ou de la securite. On peut tout a fait imaginer faire un circuit electrique en etoile pour les luminaires: chaque interrupteur, et chaque luminaire allant directement vers la carte MX-465. En cablant la carte comme on le souhaite, il sera facile de determiner que tel interrupteur doit controler telle lampe. Ainsi, on pourra allumer la lumiere depuis linterrupteur local, mais egalement depuis linterface de la MX-465 (iPhone, internet, ou controle depuis un autre equipement). En utilisant des sondes de temperatures, on pourra controler letat des radiateurs a laide des relais, pour les passer en mode eco ou en mode confort. Avec des capteurs douverture, des detecteurs de presence, et un clavier filaire, il sera tout a fait possible de gerer une alarme avec les entrees, qui declencheront la mise en route dune sirene (relai en sortie) et enverront une notification Push pour nous avertir. Avec des capteurs de niveau ou dhumidite, on pourra gerer son arrosage automatique (en pilotant les electro vannes). Avec la gestion des cartes dextension, la teleinfo, et les scenarios qui peuvent vraiment etre tres pointus, il sera possible de realiser quasiment nimporte quel controle.  
 IV. Pour aller plus loin  Au vu des fonctionnalites tres completes, cette carte peut en effet se prevaloir du nom de box domotique. Elle pourra donc sutiliser toute seule, ou accompagnee de cartes dextensions, ses entrees / sorties de base pouvant vite etre justes pour piloter entierement une maison. Linterface web peut etre personnalisee si on le souhaite, tous les outils sont fournis pour cela. Il nexiste pas a ce jour dinterface mobile, mais cela peut etre facilement realise. Si par contre on prefere coupler cette carte a une autre solution domotique, cela sera egalement tout a fait possible. Nous avons vu quun fichier xml etait disponible pour la teleinfo, la MX-465 pourra donc faire office de modem teleinfo en reseau, avec support de deux compteurs, ce qui est deja interessant. Mais les autres informations relevees par la carte (temperature, humidite, alerte, etc) pourront egalement etre lues via le fichierhttp://domotboard/protect/status.xml :   Les differents relais pourront egalement etre pilotes, via de simples requetes HTTP. Il suffit de regarder un peu le code des pages html pour trouver les differentes commandes. La commandehttp://192.168.2.52/proc.cgi?led=1 actionnera par exemple le relai 1. Entre la lecture des donnees dans un fichier xml et le pilotage des relais via de simples requetes HTTP, la MX-465 pourra donc facilement sintegrer dans un autre systeme, type box  eedomus ,  Vera , ou  Zibase , par exemple.  
 V. Conclusion  Il est difficile de demontrer tout ce dont est capable cette carte, mais jespere que cette petite presentation vous en aura donne un bon apercu. Elle est si complete quelle semble capable de controler quasiment nimporte quoi chez soit. LIPX800 nous avait deja seduit, mais cette MX-465 va encore plus loin en se payant le luxe de piloter toutes les autres cartes, et en ajoutant une vraie gestion de scenarios. Vendue 199 par la societe belge Metys, comparee aux modules contacts sec vendus dans les differentes technologies (aux alentours de 50 le module), elle est tres interessante, dautant plus quelle pourra sinterfacer facilement avec dautres equipements ( Zibase ,  Vera , Homeseer, etc) grace a son controle via des requetes HTTP. Mais comme on la vu, on peut aller beaucoup plus loin et baser toute son installation domotique dessus. Il faudra alors peut etre utiliser plusieurs de ces cartes, ou y adjoindre des cartes dextension (on peut tout a fait imaginer utiliser une IPX800 couplee a des cartes filles, le tout servant dextension a la MX-465, qui sera le cerveau de lensemble grace a sa gestion des scenarios) . Par contre, pour une utilisation aussi poussee, de bonnes connaissances en electricite seront necessaires afin dassurer la securite de lequipement et des personnes. Bref, cette carte est une petite merveille ! LIPX800 etait deja tres bonne, mais la MX-465 vient combler quelques petites lacunes (calendriers, scenarios, teleinfo, passage a lheure dete, nombreuses notifications push differentes possibles, avec des requetes tres longues, ). Legerement plus chere (199 contre 178 auxquels il faut ajouter lalimentation de lIPX), mais plus complete a ce jour. Le seul reproche quon pourrait lui faire ? Et bien cest a la fois son point fort et son point faible: le cablage. Pour controler toute sa maison, on peut simaginer creer des reseaux en etoile par zone a gerer et relier ces zones via Ethernet.Si cela est possible, une telle installation sera parmi les plus fiables quon puisse trouver, puisque entierement basee sur de lIP. Et les capacites de la MX-465 permettront de gerer la maison comme on le souhaite. Dernier point: cette carte peut bien sur etre mise a jour, jai dailleurs recu plusieurs mises a jour durant mes tests, pour de la correction de bugs mais egalement lajout de nouvelles fonctions (comme par exemple lenvoi vers le site BDPV). Le developpeur derriere cette carte est tres ouvert et reactif, ce qui est toujours un point important pour levolution dune box. Il ne me reste plus qua aller lajouter au comparatif des box domotiques, ou elle a gagne sa place   IPX800   MX-465   Une 
        </text>
</document>
