<document>
	<date>2013-10-31</date>
        <title>
Fibaro HC2: Piloter sa TV Samsung connecte</title>
        <author>Cdric Locqueneux</author>
        <tags_set>
                <tag>Fibaro</tag>
                <tag>Samsung</tag>
        </tags_set>
        <categories_set>
                <category>Guides Audio / Video</category>
                <category>Guides Box Domotique</category>
        </categories_set>
        <text>Il y a un an, suite a mon changement de TV, je vous expliquais comment  piloter sa TV Samsung connectee depuis la Vera . Ma TV est le modele UE46ES6300 : une TV connectee, qui peut donc se connecter a internet, lire des films sur le reseau, mais egalement etre pilotee par une application smartphone. Du coup, vous vous doutez bien quil etait possible de reproduire ces commandes depuis un autre equipement pour piloter sa TV et pourquoi pas, lintegrer a son systeme domotique. Un developpeur a realise un plugin pour la  Vera  qui facilite tout ca. Pour  eedomus , il aurait fallu passer par un script php externe, ce qui peut etre contraignant. Dailleurs, je ne lai jamais fait. Mais voila, apres mon changement de TV lannee derniere, cette annee jai fini par craquer et migrer ma domotique sur le  Home Center de Fibaro . Jy reviendrai dans un autre article quand jaurai fini de tout migrer (notamment les scenarios). En parcourant le forum de Fibaro a la recherche dastuces, donc, je suis tombe sur un  post qui expliquait comment piloter sa TV Samsung . Operation tres simple, puisque le script Lua etait fourni :D Je vous detail ici un peu comment proceder. 
 I. Creation dun module virtuel Le HC2 de Fibaro permet de creer des peripheriques virtuels. On va donc commencer par en creer un qui sera notre TV, en se rendant dans Ajouter un module: La, on peut lui donner un nom et laffecter a une piece: Il faut ensuite se rendre dans longlet Avance. On va lui ajouter les boutons quon souhaite. Pour ma part, je ne souhaite pas piloter toute ma TV avec le Home Center, il ny a pas dinteret, la telecommande est plus pratique. Je veux simplement pouvoir leteindre, couper ou regler le son. Jai ajoute les boutons de cette facon: Vous pouvez bien sur personnaliser selon vos besoins. Il ny a plus qua affecter un code a chaque bouton pour executer des actions. Le code est le meme pour tous les boutons, vous le trouverez dans le fichier ci dessous. [box_download] Telecharger le script Lua pour piloter sa TV Samsung [/box_download] Le script en lui meme nest pas tres complique, ceux qui ont lhabitude au Lua le comprendront sans probleme. Mais rassurez vous, nul besoin de sy connaitre en Lua. Le code fourni tel quel, fonctionne, il y a juste deux choses a personnaliser, au tout debut du script:  configuration  tvIpAddress =  192.168.2.66    a remplacer par ladresse IP de votre TV, indiquee dans la configuration reseau de celle ci tvPort = 55000 keycodestring = KEY_POWEROFF   indiquer le code de la touche a envoyer a la TV La  liste des touches possibles est disponible ici . Ce script devra etre colle dans lemplacement Lua de chaque bouton: Pensez juste bien a cocher Code Lua en bas de chaque bouton, modifier ladresse IP, et le code de la touche a envoyer. On peut ensuite personnaliser le module virtuel ou les boutons avec des icones adaptees pour rendre tout ca plus joli: Enregistrez la configuration avec la disquette a droite, cest fini ! Vous avez maintenant un module virtuel tout beau pour piloter votre TV. Avec la derniere mise a jour de lapplication, le module est meme pilotable depuis son iPhone: 
 II. Utilisation Maintenant, vous pouvez piloter votre TV Samsung depuis le Home Center 2 de Fibaro. A la premiere utilisation, votre TV affichera un message vous informant de la tentative de controle. Il faudra bien sur laccepter: Ensuite, lutilisation sera totalement transparente. Et rapide, puisque tout se passe localement. Bien sur, maintenant que le peripherique virtuel est cree, il peut etre utilise dans des scenarios. Et cest bien la tout linteret. En effet, il serait ridicule de se connecter a son HC2 pour pouvoir piloter sa TV: la telecommande reste loption la plus rapide. En revanche, il peut etre interessant dinclure la TV dans un scenario: par exemple pour leteindre automatiquement quand on active lalarme totale, signe quil ny a plus personne a la maison. Ou encore couper le son si on recoit un appel telephonique Les possibilites sont la. 
 III. Conclusion Certains se demanderont peut etre linteret de la chose ? Je vous laccorde, ce sera un peu limite. Dautant plus quil nest pas possible denvoyer une commande pour allumer la TV, Samsung ne layant pas autorisee. Quand elle est eteinte, il semblerait que la TV le soit totalement :/ Dommage, on aurait pu allumer la TV quand on arrive a la maison :p Bien sur il existe dautres solutions ( controle IR , ou encore  activation par HDMI ) que je mettrai sans doute en place plus tard. En attendant, il peut etre utile deteindre sa TV a distance (je me suis apercu il y a quelques jours que ma femme etait partie se promener en laissant la TV allumee :/), ou de changer la source dans un scenario home cinema par exemple. Et vous, quelles seraient vos idees dutilisation ?   Fibaro   Samsung 
        </text>
</document>
